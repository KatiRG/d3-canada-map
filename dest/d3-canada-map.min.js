this.getCanadaMap=function(a,b){var c,d,e,f=d3.dispatch("loaded","zoom","error"),g=function(b){var c,d,e=function(a){return 1*a.width/a.height},g=d3.transition().duration(1e3);this.svg.selectAll(".zoomed").classed("zoomed",!1),b?(this.provinces[b]._bBoxCorrected?(d=this.provinces[b].obj,c=this.provinces[b]._bBoxCorrected):(d=this.provinces[b].obj=this.svg.select("."+b),this.provinces[b]._bBox=d.node().getBBox(),c=this.provinces[b]._bBoxCorrected=function(a,b){console.log(JSON.stringify(a));var c,d,f={x:a.x,y:a.y,width:a.width,height:a.height},g=e(a),h=e(b);return g>h?(c=a.width/h,d=a.height,f.height=c,f.y=a.y-(c-d)/2):g<h&&(c=a.height*h,d=a.width,f.width=c,f.x=a.x-(c-d)/2),f}(this.provinces[b]._bBox,this._bBox)),d.classed("zoomed",!0),this.obj.classed("zoomed",!0)):c=this._bBox,a.transition(g).attr("viewBox",[c.x,c.y,c.width,c.height].join(" ")).on("end",function(){f.call("zoom",this,b)})},h=function(d,h){if(d){if(d instanceof Error)return f.call("error",c,d);if(d instanceof ProgressEvent)return f.call("error",c,new Error("Could not load the map file ("+d.target.status+" "+d.target.statusText+")"))}try{var i,j,k,l=a.append("g").attr("class","canada-map"),m=Object.keys(h.objects);for(k=0;k<m.length;k+=1)i=m[k],j=i.substr(3),b.provinces&&b.provinces.indexOf(j)===-1||(l.append("path").datum(topojson.feature(h,h.objects[i])).attr("class",j).attr("d",e),c.provinces[j]={zoom:g.bind(c,j)});c.obj=l,c._bBox=l.node().getBBox(),c.zoom=g.bind(c),c.zoom(),f.call("loaded",c)}catch(a){return f.call("error",c,a)}};return b=b||{},c={settings:b,svg:a,provinces:{},on:function(a,b){return f.on(a,b),this}},b.provinces&&"string"==typeof b.provinces&&(b.provinces=[b.provinces]),b.baseMap||(b.baseMap="data/canada.json"),d=b.projection=b.projection||d3.geoTransverseMercator().rotate([95,0]),e=d3.geoPath().projection(d),"object"==typeof b.baseMap?h(null,b.baseMap):d3.json(b.baseMap,h),c};
//# sourceMappingURL=d3-canada-map.min.js.map