this.getCanadaMap=function(a,b){var c,d,e,f=a.append("g").attr("class","canada-map"),g=d3.dispatch("loaded","zoom","error"),h=function(b){var c,d,e=function(a){return 1*a.width/a.height},f=d3.transition().duration(1e3);this.svg.selectAll(".zoomed").classed("zoomed",!1),b?(this.provinces[b]._bBoxCorrected?(d=this.provinces[b].obj,c=this.provinces[b]._bBoxCorrected):(d=this.provinces[b].obj=this.svg.select("."+b),this.provinces[b]._bBox=d.node().getBBox(),c=this.provinces[b]._bBoxCorrected=function(a,b){var c,d,f={x:a.x,y:a.y,width:a.width,height:a.height},g=e(a),h=e(b);return g>h?(c=a.width/h,d=a.height,f.height=c,f.y=a.y-(c-d)/2):g<h&&(c=a.height*h,d=a.width,f.width=c,f.x=a.x-(c-d)/2),f}(this.provinces[b]._bBox,this._bBox)),d.classed("zoomed",!0),this.obj.classed("zoomed",!0)):c=this._bBox,a.transition(f).attr("viewBox",[c.x,c.y,c.width,c.height].join(" ")).on("end",function(){g.call("zoom",this,b)})},i=function(a,d){if(a){if(a instanceof Error)return g.call("error",c,a);if(a instanceof ProgressEvent)return g.call("error",c,new Error("Could not load the map file ("+a.target.status+" "+a.target.statusText+")"))}try{var i,j,k,l=Object.keys(d.objects);for(k=0;k<l.length;k+=1)i=l[k],j=i.substr(3),b.provinces&&b.provinces.indexOf(j)===-1||(f.append("path").datum(topojson.feature(d,d.objects[i])).attr("class",j).attr("d",e),c.provinces[j]={zoom:h.bind(c,j)});c.obj=f,c._bBox=f.node().getBBox(),c.zoom=h.bind(c),c.zoom(),g.call("loaded",c)}catch(a){return g.call("error",c,a)}};return b=b||{},c={settings:b,svg:a,provinces:{},on:function(a,b){return g.on(a,b),this}},b.provinces&&"string"==typeof b.provinces&&(b.provinces=[b.provinces]),b.baseMap||(b.baseMap="data/canada.json"),d=b.projection=b.projection||d3.geoTransverseMercator().rotate([95,0]),e=d3.geoPath().projection(d),"object"==typeof b.baseMap?i(null,b.baseMap):d3.json(b.baseMap,i),c};
//# sourceMappingURL=d3-canada-map.min.js.map