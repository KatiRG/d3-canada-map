this.getCanadaMap=function(a,b){var c,d,e,f=a.append("g").attr("class","canada-map"),g=d3.dispatch("loaded","zoom","error"),h=function(a){if(a){if(a instanceof Error)return g.call("error",c,a);if(a instanceof ProgressEvent)return g.call("error",c,new Error("Could not load the map file ("+a.target.status+" "+a.target.statusText+")"))}},i=function(b){var c,d,e=function(a){return 1*a.width/a.height},f=d3.transition().duration(1e3);this.svg.selectAll(".zoomed").classed("zoomed",!1),b?(this.provinces[b]._bBoxCorrected?(d=this.provinces[b].obj,c=this.provinces[b]._bBoxCorrected):(d=this.provinces[b].obj=this.svg.select("."+b),this.provinces[b]._bBox=d.node().getBBox(),c=this.provinces[b]._bBoxCorrected=function(a,b){var c,d,f={x:a.x,y:a.y,width:a.width,height:a.height},g=e(a),h=e(b);return g>h?(c=a.width/h,d=a.height,f.height=c,f.y=a.y-(c-d)/2):g<h&&(c=a.height*h,d=a.width,f.width=c,f.x=a.x-(c-d)/2),f}(this.provinces[b]._bBox,this._bBox)),d.classed("zoomed",!0),this.obj.classed("zoomed",!0)):(c=this._bBox,a.node().msContentZoomFactor&&null===a.attr("height")&&a.attr("height",c.height+c.x)),a.transition(f).attr("viewBox",[c.x,c.y,c.width,c.height].join(" ")).on("end",function(){g.call("zoom",this,b)})},j=function(a,d){var h=(b.getProvinces||function(){var b,c,d,e=Object.keys(a.objects),f={};if(e.length>1)for(b=0;b<e.length;b++)c=e[b],f[c.substr(-2)]=a.objects[c];else if(1===e.length)for(d=a.objects[e[0]].geometries,b=0;b<d.length;b++)c=d[b].properties.PRCODE,f[c.substr(-2)]=d[b];return f})(a);try{var j,k,l=Object.keys(h);for(j=0;j<l.length;j+=1)k=l[j],b.provinces&&b.provinces.indexOf(k)===-1||(f.append("path").datum(topojson.feature(a,h[k])).attr("class",k).attr("d",e),c.provinces[k]={zoom:i.bind(c,k)});c.obj=f,c._bBox=f.node().getBBox(),c.zoom=i.bind(c),c.zoom(),d&&"function"==typeof d&&d()}catch(a){return g.call("error",c,a)}},k=function(b){var c,d=a.append("g").attr("class",b.name),f=b.getObjects(b.data);for(c=0;c<f.length;c++)d.append("path").datum(topojson.feature(b.data,f[c])).attr("d",e).attr("class",b.getClass?b.getClass(f[c]):"")};return b=b||{},c={settings:b,svg:a,provinces:{},on:function(a,b){return g.on(a,b),this}},b.provinces&&"string"==typeof b.provinces&&(b.provinces=[b.provinces]),b.baseMap||(b.baseMap="data/canada.json"),d=b.projection=b.projection||d3.geoTransverseMercator().rotate([95,0]),e=d3.geoPath().projection(d),function(){var a=function(){g.call("loaded",c)},d=function(){var c,d,e=d3.queue(),f=function(a,b){h(a),this.data=b,k(this)};for(c=0;c<b.additonalLayers.length;c++)d=b.additonalLayers[c],d.data?k(d):d.url&&e.defer(d3.json,d.url,f.bind(d));e.await(a)},e=a;b.additonalLayers&&b.additonalLayers.length>0&&(e=d),"object"==typeof b.baseMap?j(b.baseMap,e):d3.json(b.baseMap,function(a,b){h(a),j(b,e)})}(),c};
//# sourceMappingURL=d3-canada-map.min.js.map